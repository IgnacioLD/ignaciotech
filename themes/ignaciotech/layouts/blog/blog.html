{{ define "main" }}
<section class="content-section">
  <div class="container">
    <h1 class="section-title">{{ .Title }}</h1>
    <p class="section-subtitle">{{ .Description }}</p>
    {{ $blogPages := where .Site.RegularPages "Section" "blog" }}
    {{ $featured := where $blogPages "Params.featured" true }}
    {{ if gt (len $featured) 0 }}
    <div class="projects-section">
      <h2 class="projects-section-title">Featured</h2>
      <ul class="post-list">
        {{ range first 3 $featured }}
        <li class="post-item">
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
        </li>
        {{ end }}
      </ul>
    </div>
    {{ end }}

    <div class="projects-section">
      <h2 class="projects-section-title">All Posts</h2>
      <ul class="post-list">
        {{ $nonfeat := where $blogPages "Params.featured" "ne" true }}
        {{ range $nonfeat }}
        <li class="post-item">
          <a href="{{ .RelPermalink }}">{{ .Title }}</a>
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "Jan 2, 2006" }}</time>
        </li>
        {{ end }}
      </ul>
    </div>
  </div>
</section>
{{ end }}
