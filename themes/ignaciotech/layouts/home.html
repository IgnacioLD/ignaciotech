{{ define "main" }}
{{ $projects := site.Data.projects }}
{{ if eq site.Language.Lang "es" }}
  {{ $projects = site.Data.es.projects }}
{{ end }}

<!-- Hero Section -->
<section class="hero">
  <div class="hero-content animate-fade-in">
    <h1>Ignacio Loyola</h1>
    <p class="subtitle">{{ i18n "hero.subtitle" }}</p>
    <div class="cta-group">
      {{ with site.Params.social.linkedin }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="cta-button cta-outline">LinkedIn</a>
      {{ end }}
      {{ with site.Params.social.email }}
        <a href="mailto:{{ . }}" class="cta-button">Email</a>
      {{ end }}
      {{ with site.Params.social.mastodon }}
        <a href="{{ . }}" target="_blank" rel="me noopener noreferrer" class="cta-button cta-outline">Mastodon</a>
      {{ end }}
      {{ with site.Params.social.medium }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="cta-button cta-outline">Medium</a>
      {{ end }}
    </div>
  </div>
</section>


<!-- Projects Section -->
<section id="projects" class="content-section">
  <div class="container">
    <h2 class="section-title">{{ i18n "projects.title" }}</h2>
    <p class="section-subtitle">{{ i18n "projects.subtitle" }}</p>
    
    <div class="card-grid">
      {{ range $projects.projects }}
      {{ $p1 := site.GetPage (print "/projects/" .slug "/") }}
      {{ $p2 := site.GetPage (print "projects/" .slug) }}
      {{ $page := or $p1 $p2 }}
      <div class="card" {{ if $page }}data-href="{{ $page.RelPermalink }}" role="link" tabindex="0"{{ end }}>
        {{ if $page }}
        <a href="{{ $page.RelPermalink }}" class="card-preview-link" aria-label="Open {{ .name }}">
          <div class="project-image-placeholder">
            {{ if .image }}
              {{ partial "image.html" (dict "page" $page "src" .image "alt" .name "class" "project-preview-image" "width" 1200) }}
            {{ else }}
              <img src="/images/placeholders/project-apps.svg" alt="{{ .name }}" class="project-preview-image">
            {{ end }}
          </div>
        </a>
        <h3><a href="{{ $page.RelPermalink }}">{{ .name }}</a></h3>
        {{ else }}
        <div class="project-image-placeholder">
          {{ if .image }}
            {{ partial "image.html" (dict "page" . "src" .image "alt" .name "class" "project-preview-image" "width" 1200) }}
          {{ else }}
            <img src="/images/placeholders/project-apps.svg" alt="{{ .name }}" class="project-preview-image">
          {{ end }}
        </div>
        <h3>{{ .name }}</h3>
        {{ end }}
        <p>{{ .description }}</p>
        <div class="skills-list">
          {{ range .skills }}
          <span class="skill-tag">{{ . }}</span>
          {{ end }}
        </div>
        
        {{ if .links }}
        <div class="project-links">
          {{ range .links }}
          <a href="{{ .url }}" target="_blank" rel="noopener noreferrer" class="project-link">
            <span>{{ .name }}</span>
            <span class="link-icon">â†—</span>
          </a>
          {{ end }}
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>


{{ end }}
