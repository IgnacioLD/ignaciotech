{{ define "main" }}

<!-- Hero Section -->
<section class="hero" data-layout="{{ .Params.hero_layout.style | default "minimal" }}" itemscope itemtype="http://schema.org/Person">
  <div class="hero-container">
    <div class="hero-content">
      <!-- Greeting -->
      {{ with .Params.hero.greeting }}
      <h1 class="hero-greeting" id="dynamic-greeting" itemprop="name">{{ . | markdownify }}</h1>
      {{ end }}

      <!-- Introduction -->
      {{ with .Params.hero.introduction }}
      <p class="hero-introduction" itemprop="description">{{ . | markdownify }}</p>
      {{ end }}
      
      <!-- Mission -->
      {{ with .Params.hero.mission }}
      <p class="hero-mission">{{ . | markdownify }}</p>
      {{ end }}
      
      <!-- Approach -->
      {{ with .Params.hero.approach }}
      <p class="hero-approach">{{ . | markdownify }}</p>
      {{ end }}
      
      <!-- Navigation Section -->
      {{ with .Params.hero.navigation }}
      <div class="hero-navigation">
        <strong>{{ .title }}:</strong>
        <span>{{ .description }}</span>
        {{ range $index, $link := .links }}
          {{- if gt $index 0 }}, {{ end -}}
          <a href="{{ $link.url }}">{{ $link.name }}</a>
        {{- end }}.
      </div>
      {{ end }}
      
      <!-- Social Section -->
      {{ with .Params.hero.social }}
      <div class="hero-social">
        {{ if .show_icons }}
        {{ partial "social-icons.html" . }}
        {{ end }}

        {{ with .closing_message }}
        <p class="hero-closing">{{ . | markdownify }}</p>
        {{ end }}

        {{ with .signature }}
        <p class="hero-signature">{{ . | markdownify }}</p>
        {{ end }}
      </div>
      {{ end }}

      <!-- Scroll Indicator -->
      <div class="scroll-indicator">
        <span class="scroll-text">Scroll to explore</span>
        <div class="scroll-arrow">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
          </svg>
        </div>
      </div>
    </div>

    <!-- Portrait -->
    {{ if and (.Params.hero_layout.show_portrait | default true) (.Params.hero.portrait.show | default true) }}
    <div class="hero-portrait">
      {{ with .Params.hero.portrait }}
      {{ partial "image.html" (dict "page" $ "src" .src "alt" .alt "class" "hero-portrait-img" "width" 1200 "loading" "lazy" "fetchpriority" "low") }}
      {{ end }}
    </div>
    {{ end }}
  </div>
</section>

<!-- Portfolio Content -->
<section class="home-portfolio">
  <div class="container">
    <!-- What I Do Section -->
    <div class="intro-section">
      <h2>What I Do</h2>
      <p>I'm an <strong>MLOps & GenAI engineer</strong> specializing in building <strong>production AI systems FROM SCRATCH</strong>. I built an enterprise AI automation system for a major European bank that handled code generation, project management, and meeting automation - delivered working POC in under a month solo.</p>

      <p>I focus on <strong>LLM deployment, edge AI, and AI infrastructure</strong> that scales to production. My work includes on-device inference optimization, multi-agent systems, and framework-agnostic ML pipelines. I've been <strong>tinkering with hardware since age 12</strong> (Arduino, electronics) and <strong>programming since age 15</strong>.</p>

      <p>Currently exploring <strong>edge MLOps</strong> - running LLMs on mobile devices with custom tokenization and hardware acceleration. Recent project: Phi-3 inference on Android achieving 4 tokens/second with KV caching and NNAPI.</p>

      <div class="stats-row">
        {{ partial "skill-badge.html" (dict "skill" "5+ years experience" "featured" true) }}
        {{ partial "skill-badge.html" (dict "skill" "5 languages fluent" "featured" true) }}
        {{ partial "skill-badge.html" (dict "skill" "Valencia, Spain" "featured" true) }}
      </div>
    </div>

    <!-- Featured Projects -->
    <div class="projects-section">
      <h2 class="section-title">Featured Projects</h2>
      <div class="card-grid">
        {{ $projects := site.Data.projects }}
        {{ if eq site.Language.Lang "es" }}
          {{ $projects = site.Data.es.projects }}
        {{ end }}
        {{ range first 3 $projects.projects }}
          {{ $p1 := site.GetPage (print "/projects/" .slug "/") }}
          {{ $p2 := site.GetPage (print "projects/" .slug) }}
          {{ $p3 := site.GetPage (print "/projects/" .slug) }}
          {{ $p4 := site.GetPage (print "content/projects/" .slug ".md") }}
          {{ $page := or $p1 $p2 $p3 $p4 }}
          {{ partial "project-card.html" (dict "project" . "page" $page "featured" true) }}
        {{ end }}
      </div>
      <div class="section-footer">
        <a href="/projects" class="cta-button">View Full Portfolio</a>
      </div>
    </div>

    <!-- Recent Blog Posts -->
    <div class="blog-section">
      <h2 class="section-title">Recent Thoughts</h2>
      <div class="blog-grid">
        {{ $blogPages := where .Site.RegularPages "Section" "blog" }}
        {{ range first 3 $blogPages }}
          {{ partial "blog-card.html" (dict "post" . "compact" false) }}
        {{ end }}
      </div>
      <div class="section-footer">
        <a href="/blog" class="cta-button">Read More Articles</a>
      </div>
    </div>

    <!-- Skills & Specialties -->
    <div class="skills-section">
      <h2 class="section-title">Specialties</h2>
      <div class="skills-grid">
        {{ partial "skill-badge.html" (dict "skill" "MLOps" "clickable" true) }}
        {{ partial "skill-badge.html" (dict "skill" "GenAI & LLMs" "clickable" true) }}
        {{ partial "skill-badge.html" (dict "skill" "Edge AI" "clickable" true) }}
        {{ partial "skill-badge.html" (dict "skill" "Model Deployment" "clickable" true) }}
        {{ partial "skill-badge.html" (dict "skill" "Python" "clickable" true) }}
        {{ partial "skill-badge.html" (dict "skill" "AI Infrastructure" "clickable" true) }}
      </div>
    </div>

    <!-- CTA Section -->
    <div class="cta-section">
      <h2>Want to have a chat?</h2>
      <p>Always up for a conversation about MLOps, GenAI, or building production AI systems. Whether you're looking to collaborate on LLM deployment, edge AI infrastructure, or framework-agnostic ML solutions, I'd love to connect.</p>

      <p>I'm particularly interested in projects involving <strong>on-device AI, multi-agent systems, and AI automation</strong> - especially in fintech and banking. Building since age 12 (hardware) and 15 (code), fluent in 5 languages, based in Valencia.</p>

      <div class="cta-buttons">
        <a href="mailto:hi@ignacio.tech" class="cta-button primary">Get in Touch</a>
        <a href="/projects" class="cta-button secondary">View Full Portfolio</a>
      </div>
    </div>
  </div>
</section>

{{ with .Content }}
<section class="home-content hidden">
  <div class="container">
    {{ . }}
  </div>
</section>
{{ end }}

{{ end }}
