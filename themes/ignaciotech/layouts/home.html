{{ define "main" }}
{{ $projects := site.Data.projects }}
{{ if eq site.Language.Lang "es" }}
  {{ $projects = site.Data.es.projects }}
{{ end }}

<!-- Hero Section -->
<section class="hero">
  <div class="hero-content animate-fade-in">
    <h1>Ignacio Loyola</h1>
    <p class="subtitle">{{ i18n "hero.subtitle" }}</p>
    <div class="cta-group">
      {{ with site.Params.social.linkedin }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="cta-button cta-outline">LinkedIn</a>
      {{ end }}
      {{ with site.Params.social.email }}
        <a href="mailto:{{ . }}" class="cta-button">Email</a>
      {{ end }}
      {{ with site.Params.social.mastodon }}
        <a href="{{ . }}" target="_blank" rel="me noopener noreferrer" class="cta-button cta-outline">Mastodon</a>
      {{ end }}
      {{ with site.Params.social.medium }}
        <a href="{{ . }}" target="_blank" rel="noopener noreferrer" class="cta-button cta-outline">Medium</a>
      {{ end }}
    </div>
  </div>
</section>

<!-- About Section -->
<section id="about" class="content-section">
  <div class="container">
    <h2 class="section-title">{{ i18n "about.title" }}</h2>
    <p class="section-subtitle">{{ i18n "about.subtitle" }}</p>
    
    <div class="card-grid">
      <div class="card">
        <h3>{{ i18n "skills.mobile_title" }}</h3>
        <p>{{ i18n "skills.mobile_desc" }}</p>
        <div class="skills-list">
          <span class="skill-tag">Android</span>
          <span class="skill-tag">Kotlin</span>
          <span class="skill-tag">A11y</span>
        </div>
      </div>
      
      <div class="card">
        <h3>{{ i18n "skills.ai_title" }}</h3>
        <p>{{ i18n "skills.ai_desc" }}</p>
        <div class="skills-list">
          <span class="skill-tag">Python</span>
          <span class="skill-tag">AI Automation</span>
          <span class="skill-tag">GenAI</span>
        </div>
      </div>
      
      <div class="card">
        <h3>{{ i18n "skills.community_title" }}</h3>
        <p>{{ i18n "skills.community_desc" }}</p>
        <div class="skills-list">
          <span class="skill-tag">Open Source</span>
          <span class="skill-tag">Project Leadership</span>
          <span class="skill-tag">Community</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Projects Section -->
<section id="projects" class="content-section">
  <div class="container">
    <h2 class="section-title">{{ i18n "projects.title" }}</h2>
    <p class="section-subtitle">{{ i18n "projects.subtitle" }}</p>
    
    <div class="card-grid">
      {{ range $projects.projects }}
      {{ $p1 := site.GetPage (print "/projects/" .slug "/") }}
      {{ $p2 := site.GetPage (print "projects/" .slug) }}
      {{ $page := or $p1 $p2 }}
      <div class="card" {{ if $page }}data-href="{{ $page.RelPermalink }}" role="link" tabindex="0"{{ end }}>
        {{ if $page }}
        <a href="{{ $page.RelPermalink }}" class="card-preview-link" aria-label="Open {{ .name }}">
          <div class="project-image-placeholder">
            {{ if .image }}
              {{ partial "image.html" (dict "page" $page "src" .image "alt" .name "class" "project-preview-image" "width" 1200) }}
            {{ else }}
              <img src="/images/placeholders/project-apps.svg" alt="{{ .name }}" class="project-preview-image">
            {{ end }}
          </div>
        </a>
        <h3><a href="{{ $page.RelPermalink }}">{{ .name }}</a></h3>
        {{ else }}
        <div class="project-image-placeholder">
          {{ if .image }}
            {{ partial "image.html" (dict "page" . "src" .image "alt" .name "class" "project-preview-image" "width" 1200) }}
          {{ else }}
            <img src="/images/placeholders/project-apps.svg" alt="{{ .name }}" class="project-preview-image">
          {{ end }}
        </div>
        <h3>{{ .name }}</h3>
        {{ end }}
        <p>{{ .description }}</p>
        <div class="skills-list">
          {{ range .skills }}
          <span class="skill-tag">{{ . }}</span>
          {{ end }}
        </div>
        
        {{ if .links }}
        <div class="project-links">
          {{ range .links }}
          <a href="{{ .url }}" target="_blank" rel="noopener noreferrer" class="project-link">
            <span>{{ .name }}</span>
            <span class="link-icon">â†—</span>
          </a>
          {{ end }}
        </div>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </div>
</section>


<!-- Experience Section -->
<section id="experience" class="content-section">
  <div class="container">
    <h2 class="section-title">Experience</h2>
    <p class="section-subtitle">
      Professional programming experience with focus on Android development and AI solutions across various industries.
    </p>
    
    <div class="timeline">
      {{ range site.Data.experience.experience }}
      <div class="timeline-item">
        <div class="timeline-marker"></div>
        <div class="timeline-content">
          <div class="timeline-date">{{ .date }}</div>
          <h3>{{ .title }}</h3>
          <h4>{{ .company }}</h4>
          <p>{{ .description }}</p>
          <div class="skills-list">
            {{ range .skills }}
            <span class="skill-tag">{{ . }}</span>
            {{ end }}
          </div>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>


<!-- Contact Section -->
<section id="contact" class="content-section">
  <div class="container">
    <h2 class="section-title">Let's Collaborate</h2>
    <p class="section-subtitle">
      I'm always interested in new opportunities and interesting projects.
      Feel free to reach out if you'd like to collaborate.
    </p>
    
    <div class="text-center">
      <a href="mailto:hi@ignacio.tech" class="cta-button">Send Message</a>
    </div>
  </div>
</section>
{{ end }}
